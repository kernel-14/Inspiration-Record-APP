# 灵感知识图谱使用说明

## 🌟 功能概述

灵感知识图谱是一个交互式可视化工具，通过网络图的形式展示灵感之间的关联关系，帮助你发现思维模式和创意连接。

## ✨ 核心特性

### 1. 双视图模式

- **列表视图** 📝
  - 传统的卡片列表展示
  - 适合快速浏览和添加灵感
  - 按时间倒序排列

- **知识图谱视图** 🕸️
  - 网络图可视化展示
  - 显示灵感之间的关联关系
  - 基于标签的智能分组

### 2. 节点类型

#### 灵感节点（紫色圆圈）
- 代表每一条灵感记录
- 大小固定（半径 20px）
- 显示灵感内容的前 20 个字符
- 点击查看完整内容

#### 标签节点（彩色圆圈）
- 代表灵感的分类标签
- 大小较大（半径 30px）
- 不同标签有不同颜色
- 点击查看该标签下的所有灵感

### 3. 连接关系

#### 灵感-标签连接
- 连接灵感到其所属的标签
- 线条透明度固定
- 表示分类关系

#### 灵感-灵感连接
- 基于共同标签计算相似度
- 相似度 > 0.3 时创建连接
- 线条透明度反映相似度强度
- 帮助发现相关的想法

### 4. 相似度计算

使用 Jaccard 相似度算法：

```
相似度 = 共同标签数 / 总标签数
```

**示例：**
- 灵感 A: [自然, 生活]
- 灵感 B: [生活, 提醒]
- 共同标签: [生活] (1个)
- 总标签: [自然, 生活, 提醒] (3个)
- 相似度: 1/3 ≈ 0.33 ✅ 创建连接

## 🎨 标签颜色映射

| 标签 | 颜色 | 色值 |
|------|------|------|
| 随想 | 淡紫色 | #DDD6FE |
| 自然 | 淡绿色 | #D9F99D |
| 设计 | 淡红色 | #FECACA |
| 创意 | 淡橙色 | #FED7AA |
| 生活 | 淡蓝色 | #BFDBFE |
| 提醒 | 淡黄色 | #FEF08A |
| 工作 | 淡紫色 | #E9D5FF |
| 学习 | 淡灰色 | #CBD5E1 |
| 友情 | 淡粉色 | #FBCFE8 |
| 成长 | 淡蓝紫 | #C7D2FE |

## 🖱️ 交互操作

### 视图切换
1. 点击顶部的"列表视图"或"知识图谱"按钮
2. 视图会平滑切换

### 查看详情
1. 在知识图谱中点击任意节点
2. 弹出详情面板显示：
   - 灵感节点：完整内容、标签、创建时间
   - 标签节点：标签名称、相关灵感数量

### 关闭详情
- 点击详情面板外的任意区域
- 或点击面板右上角的 ✕ 按钮

### 添加灵感
- 点击右下角的 ✨ 按钮
- 在两种视图下都可以添加

## 🔧 技术实现

### 力导向布局算法

使用物理模拟实现自然的节点分布：

1. **中心引力**
   - 将所有节点拉向画布中心
   - 防止节点飘出视野

2. **节点斥力**
   - 节点之间相互排斥
   - 避免重叠和拥挤

3. **连接引力**
   - 有连接的节点相互吸引
   - 形成聚类效果

4. **阻尼系数**
   - 逐渐减速，最终稳定
   - 创造平滑的动画效果

### 性能优化

- 使用 Canvas 渲染（高性能）
- requestAnimationFrame 动画循环
- 边界约束防止节点溢出
- 冷却系数控制计算量

## 📊 使用场景

### 1. 发现思维模式
- 观察哪些标签出现频率最高
- 找到你最常思考的主题

### 2. 连接创意
- 查看相似灵感的连接
- 发现意想不到的关联

### 3. 整理思路
- 通过可视化理解想法结构
- 识别需要深入的领域

### 4. 激发灵感
- 点击标签查看相关想法
- 从旧灵感中获得新启发

## 🎯 最佳实践

### 添加灵感时
1. **使用准确的标签**
   - 选择最能代表内容的标签
   - 避免过多标签（2-3个最佳）

2. **保持标签一致性**
   - 使用统一的标签名称
   - 例如：统一用"自然"而不是"大自然"

3. **定期回顾**
   - 切换到知识图谱视图
   - 观察思维的演变

### 查看图谱时
1. **关注聚类**
   - 密集连接的区域代表核心主题
   - 孤立节点可能是新方向

2. **探索连接**
   - 点击相似的灵感
   - 思考它们的共同点

3. **标签分析**
   - 观察标签节点的连接数
   - 了解你的兴趣分布

## 🚀 快速开始

### 测试知识图谱

打开测试页面查看效果：

```bash
# 在浏览器中打开
frontend/test-inspiration-graph.html
```

### 在应用中使用

1. 启动应用
2. 点击底部导航的"灵感"图标
3. 点击顶部的"知识图谱"按钮
4. 开始探索你的灵感网络！

## 💡 示例数据

默认包含 8 条示例灵感：

1. "如果云朵只是地球在做梦呢？" - [随想, 自然]
2. "设计概念：一个不显示数字的时钟..." - [设计, 创意]
3. "旧书和咖啡的香气。" - [生活]
4. "记得在接电话前深呼吸。" - [提醒, 生活]
5. "今天的日落特别粉。" - [自然, 生活]
6. "学会在困难中保持积极。" - [成长, 学习]
7. "珍惜身边的朋友。" - [友情, 生活]
8. "保持积极心态面对压力。" - [成长, 工作]

这些数据会形成一个有趣的知识网络，展示不同主题之间的关联。

## 🎨 自定义

### 修改标签颜色

编辑 `frontend/components/InspirationGraph.tsx`：

```typescript
const TAG_COLORS: Record<string, string> = {
  '你的标签': '#你的颜色',
  // ...
};
```

### 调整相似度阈值

修改连接创建条件：

```typescript
if (similarity > 0.3) { // 改为你想要的阈值
  // 创建连接
}
```

### 调整节点大小

修改节点创建时的 radius 属性：

```typescript
radius: 30, // 标签节点
radius: 20, // 灵感节点
```

## 🐛 故障排查

### 图谱不显示
1. 检查是否有灵感数据
2. 打开浏览器控制台查看错误
3. 确认 Canvas 元素已加载

### 节点重叠
- 增加斥力系数 `repelForce`
- 减少连接引力 `linkForce`

### 动画卡顿
- 减少节点数量
- 降低模拟精度（增加 alpha）

## 📚 相关文档

- [灵感记录功能说明](docs/FEATURE_SUMMARY.md#灵感记录)
- [前端组件文档](frontend/README.md)
- [API 文档](http://localhost:8000/docs)

---

**享受探索你的思维网络！** 🌟
